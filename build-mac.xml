<project name="moai-staging" default="build-all">

    <!-- ================================================================ -->
    <!-- build macro -->
    <!-- ================================================================ -->
	<macrodef name="build">
		<attribute name="configuration"/>
		<attribute name="which-sdk"/>
		<sequential>
			<exec executable="xcodebuild" dir="xcode" failonerror="true" output="xcode/xcodebuild.cc.output">
				<arg line="-target Moai -configuration ${configuration} -sdk ${which-sdk} clean build"/>
			</exec>
		</sequential>
	</macrodef>

    <!-- ================================================================ -->
    <!-- build all -->
    <!-- ================================================================ -->
    <target name="build-all">
		<build configuration="Distribution" which-sdk="iphoneos"/>
		<build configuration="Distribution" which-sdk="iphonesimulator"/>
		<build configuration="Debug" which-sdk="iphoneos"/>
		<build configuration="Debug" which-sdk="iphonesimulator"/>
	</target>
</project>